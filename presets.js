// Many of these macros come from https://golopot.github.io/tex-to-unicode/

function doReplacements(text, dict) {
  // Apply single-letter replacements to text
  return Array.from(text).map(c => c in dict ? dict[c] : c).join('');
}

const presets = {};
function registerPreset(preset) {
  presets[preset.name] = preset;
  return preset;
}

// ==  Letter mappins shared between presets == //

const superscripts = {
  "0": "â°", "1": "Â¹", "2": "Â²", "3": "Â³", "4": "â´", "5": "âµ", "6": "â¶",
  "7": "â·", "8": "â¸", "9": "â¹",

  "+": "âº", "-": "â»", "(": "â½", ")": "â¾", "a": "áµƒ", "b": "áµ‡", "c": "á¶œ",
  "d": "áµˆ", "e": "áµ‰", "f": "á¶ ", "g": "áµ", "h": "Ê°", "i": "â±", "j": "Ê²",
  "k": "áµ", "l": "Ë¡", "m": "áµ", "n": "â¿", "o": "áµ’", "p": "áµ–", "r": "Ê³",
  "s": "Ë¢", "t": "áµ—", "u": "áµ˜", "v": "áµ›", "w": "Ê·", "x": "Ë£", "y": "Ê¸",
  "z": "á¶»",
};

const subscripts = {
  "0": "â‚€", "1": "â‚", "2": "â‚‚", "3": "â‚ƒ", "4": "â‚„", "5": "â‚…", "6": "â‚†",
  "7": "â‚‡", "8": "â‚ˆ", "9": "â‚‰",

  "+": "âº", "-": "â»", "(": "â‚", ")": "â‚Ž", "a": "â‚", "e": "â‚‘", "h": "â‚•",
  "i": "áµ¢", "j": "â±¼", "k": "â‚–", "l": "â‚—", "m": "â‚˜", "n": "â‚™", "o": "â‚’",
  "p": "â‚š", "r": "áµ£", "s": "â‚›", "t": "â‚œ", "u": "áµ¤", "v": "áµ¥", "x": "â‚“",
}

const math_letters = {
  "a": "ð‘Ž", "A": "ð´", "b": "ð‘", "B": "ðµ", "c": "ð‘", "C": "ð¶", "d": "ð‘‘",
  "D": "ð·", "e": "ð‘’", "E": "ð¸", "f": "ð‘“", "F": "ð¹", "g": "ð‘”", "G": "ðº",
  "h": "â„Ž", "H": "ð»", "i": "ð‘–", "I": "ð¼", "j": "ð‘—", "J": "ð½", "k": "ð‘˜",
  "K": "ð¾", "l": "ð‘™", "L": "ð¿", "m": "ð‘š", "M": "ð‘€", "n": "ð‘›", "N": "ð‘",
  "o": "ð‘œ", "O": "ð‘‚", "p": "ð‘", "P": "ð‘ƒ", "q": "ð‘ž", "Q": "ð‘„", "r": "ð‘Ÿ",
  "R": "ð‘…", "s": "ð‘ ", "S": "ð‘†", "t": "ð‘¡", "T": "ð‘‡", "u": "ð‘¢", "U": "ð‘ˆ",
  "v": "ð‘£", "V": "ð‘‰", "w": "ð‘¤", "W": "ð‘Š", "x": "ð‘¥", "X": "ð‘‹", "y": "ð‘¦",
  "Y": "ð‘Œ", "z": "ð‘§", "Z": "ð‘",
}

const blackboard_letters = {
  "a": "ð•’", "A": "ð”¸", "b": "ð•“", "B": "ð”¹", "c": "ð•”", "C": "â„‚", "d": "ð••",
  "D": "ð”»", "e": "ð•–", "E": "ð”¼", "f": "ð•—", "F": "ð”½", "g": "ð•˜", "G": "ð”¾",
  "h": "ð•™", "H": "â„", "i": "ð•š", "I": "ð•€", "j": "ð•›", "J": "ð•", "k": "ð•œ",
  "K": "ð•‚", "l": "ð•", "L": "ð•ƒ", "m": "ð•ž", "M": "ð•„", "n": "ð•Ÿ", "N": "â„•",
  "o": "ð• ", "O": "ð•†", "p": "ð•¡", "P": "â„™", "q": "ð•¢", "Q": "â„š", "r": "ð•£",
  "R": "â„", "s": "ð•¤", "S": "ð•Š", "t": "ð•¥", "T": "ð•‹", "u": "ð•¦", "U": "ð•Œ",
  "v": "ð•§", "V": "ð•", "x": "ð•©", "X": "ð•", "y": "ð•ª", "Y": "ð•", "z": "ð•«",
  "Z": "â„¤", "0": "ðŸ˜", "1": "ðŸ™", "2": "ðŸš", "3": "ðŸ›", "4": "ðŸœ", "5": "ðŸ",
  "6": "ðŸž", "7": "ðŸŸ", "8": "ðŸ ", "9": "ðŸ¡",
}

const fraktur_letters = {
  "a": "ð”ž", "A": "ð”„", "b": "ð”Ÿ", "B": "ð”…", "c": "ð” ", "C": "â„­", "d": "ð”¡",
  "D": "ð”‡", "e": "ð”¢", "E": "ð”ˆ", "f": "ð”£", "F": "ð”‰", "g": "ð”¤", "G": "ð”Š",
  "h": "ð”¥", "H": "â„Œ", "i": "ð”¦", "I": "â„‘", "j": "ð”§", "J": "ð”", "k": "ð”¨",
  "K": "ð”Ž", "l": "ð”©", "L": "ð”", "m": "ð”ª", "M": "ð”", "n": "ð”«", "N": "ð”‘",
  "o": "ð”¬", "O": "ð”’", "p": "ð”­", "P": "ð”“", "q": "ð”®", "Q": "ð””", "r": "ð”¯",
  "R": "â„œ", "s": "ð”°", "S": "ð”–", "t": "ð”±", "T": "ð”—", "u": "ð”²", "U": "ð”˜",
  "v": "ð”³", "V": "ð”™", "x": "ð”µ", "X": "ð”›", "y": "ð”¶", "Y": "ð”œ", "z": "ð”·",
  "Z": "â„¨",
}

const script_letters = {
  "a": "ð’¶", "A": "ð’œ", "b": "ð’·", "B": "â„¬", "c": "ð’¸", "C": "ð’ž", "d": "ð’¹",
  "D": "ð’Ÿ", "e": "â„¯", "E": "â„°", "f": "ð’»", "F": "â„±", "g": "â„Š", "G": "ð’¢",
  "h": "ð’½", "H": "â„‹", "i": "ð’¾", "I": "â„", "j": "ð’¿", "J": "ð’¥", "k": "ð“€",
  "K": "ð’¦", "l": "ð“", "L": "â„’", "m": "ð“‚", "M": "â„³", "n": "ð“ƒ", "N": "ð’©",
  "o": "â„´", "O": "ð’ª", "p": "ð“…", "P": "ð’«", "q": "ð“†", "Q": "ð’¬", "r": "ð“‡",
  "R": "â„›", "s": "ð“ˆ", "S": "ð’®", "t": "ð“‰", "T": "ð’¯", "u": "ð“Š", "U": "ð’°",
  "v": "ð“‹", "V": "ð’±", "w": "ð“Œ", "W": "ð’²", "x": "ð“", "X": "ð’³", "y": "ð“Ž",
  "Y": "ð’´", "z": "ð“", "Z": "ð’µ",
}

const calligraphic_letters = {
  "a": "ð“ª", "A": "ð“", "b": "ð“«", "B": "ð“‘", "c": "ð“¬", "C": "ð“’", "d": "ð“­",
  "D": "ð““", "e": "ð“®", "E": "ð“”", "f": "ð“¯", "F": "ð“•", "g": "ð“°", "G": "ð“–",
  "h": "ð“±", "H": "ð“—", "i": "ð“²", "I": "ð“˜", "j": "ð“³", "J": "ð“™", "k": "ð“´",
  "K": "ð“š", "l": "ð“µ", "L": "ð“›", "m": "ð“¶", "M": "ð“œ", "n": "ð“·", "N": "ð“",
  "o": "ð“¸", "O": "ð“ž", "p": "ð“¹", "P": "ð“Ÿ", "q": "ð“º", "Q": "ð“ ", "r": "ð“»",
  "R": "ð“¡", "s": "ð“¼", "S": "ð“¢", "t": "ð“½", "T": "ð“£", "u": "ð“¾", "U": "ð“¤",
  "v": "ð“¿", "V": "ð“¥", "w": "ð”€", "W": "ð“¦", "x": "ð”", "X": "ð“§", "y": "ð”‚",
  "Y": "ð“¨", "z": "ð”ƒ", "Z": "ð“©",
}

const italic_letters = {
  "a": "ð˜¢", "A": "ð˜ˆ", "b": "ð˜£", "B": "ð˜‰", "c": "ð˜¤", "C": "ð˜Š", "d": "ð˜¥",
  "D": "ð˜‹", "e": "ð˜¦", "E": "ð˜Œ", "f": "ð˜§", "F": "ð˜", "g": "ð˜¨", "G": "ð˜Ž",
  "h": "ð˜©", "H": "ð˜", "i": "ð˜ª", "I": "ð˜", "j": "ð˜«", "J": "ð˜‘", "k": "ð˜¬",
  "K": "ð˜’", "l": "ð˜­", "L": "ð˜“", "m": "ð˜®", "M": "ð˜”", "n": "ð˜¯", "N": "ð˜•",
  "o": "ð˜°", "O": "ð˜–", "p": "ð˜±", "P": "ð˜—", "q": "ð˜²", "Q": "ð˜˜", "r": "ð˜³",
  "R": "ð˜™", "s": "ð˜´", "S": "ð˜š", "t": "ð˜µ", "T": "ð˜›", "u": "ð˜¶", "U": "ð˜œ",
  "v": "ð˜·", "V": "ð˜", "w": "ð˜¸", "W": "ð˜ž", "x": "ð˜¹", "X": "ð˜Ÿ", "y": "ð˜º",
  "Y": "ð˜ ", "z": "ð˜»", "Z": "ð˜¡",

  "ð—®": "ð™–", "ð—”": "ð˜¼", "ð—¯": "ð™—", "ð—•": "ð˜½", "ð—°": "ð™˜", "ð—–": "ð˜¾", "ð—±": "ð™™",
  "ð——": "ð˜¿", "ð—²": "ð™š", "ð—˜": "ð™€", "ð—³": "ð™›", "ð—™": "ð™", "ð—´": "ð™œ", "ð—š": "ð™‚",
  "ð—µ": "ð™", "ð—›": "ð™ƒ", "ð—¶": "ð™ž", "ð—œ": "ð™„", "ð—·": "ð™Ÿ", "ð—": "ð™…", "ð—¸": "ð™ ",
  "ð—ž": "ð™†", "ð—¹": "ð™¡", "ð—Ÿ": "ð™‡", "ð—º": "ð™¢", "ð— ": "ð™ˆ", "ð—»": "ð™£", "ð—¡": "ð™‰",
  "ð—¼": "ð™¤", "ð—¢": "ð™Š", "ð—½": "ð™¥", "ð—£": "ð™‹", "ð—¾": "ð™¦", "ð—¤": "ð™Œ", "ð—¿": "ð™§",
  "ð—¥": "ð™", "ð˜€": "ð™¨", "ð—¦": "ð™Ž", "ð˜": "ð™©", "ð—§": "ð™", "ð˜‚": "ð™ª", "ð—¨": "ð™",
  "ð˜ƒ": "ð™«", "ð—©": "ð™‘", "ð˜„": "ð™¬", "ð—ª": "ð™’", "ð˜…": "ð™­", "ð—«": "ð™“", "ð˜†": "ð™®",
  "ð—¬": "ð™”", "ð˜‡": "ð™¯", "ð—­": "ð™•",
}

const bold_letters = {
  "a": "ð—®", "A": "ð—”", "b": "ð—¯", "B": "ð—•", "c": "ð—°", "C": "ð—–", "d": "ð—±",
  "D": "ð——", "e": "ð—²", "E": "ð—˜", "f": "ð—³", "F": "ð—™", "g": "ð—´", "G": "ð—š",
  "h": "ð—µ", "H": "ð—›", "i": "ð—¶", "I": "ð—œ", "j": "ð—·", "J": "ð—", "k": "ð—¸",
  "K": "ð—ž", "l": "ð—¹", "L": "ð—Ÿ", "m": "ð—º", "M": "ð— ", "n": "ð—»", "N": "ð—¡",
  "o": "ð—¼", "O": "ð—¢", "p": "ð—½", "P": "ð—£", "q": "ð—¾", "Q": "ð—¤", "r": "ð—¿",
  "R": "ð—¥", "s": "ð˜€", "S": "ð—¦", "t": "ð˜", "T": "ð—§", "u": "ð˜‚", "U": "ð—¨",
  "v": "ð˜ƒ", "V": "ð—©", "w": "ð˜„", "W": "ð—ª", "x": "ð˜…", "X": "ð—«", "y": "ð˜†",
  "Y": "ð—¬", "z": "ð˜‡", "Z": "ð—­",

  "ð˜¢": "ð™–", "ð˜ˆ": "ð˜¼", "ð˜£": "ð™—", "ð˜‰": "ð˜½", "ð˜¤": "ð™˜", "ð˜Š": "ð˜¾", "ð˜¥": "ð™™",
  "ð˜‹": "ð˜¿", "ð˜¦": "ð™š", "ð˜Œ": "ð™€", "ð˜§": "ð™›", "ð˜": "ð™", "ð˜¨": "ð™œ", "ð˜Ž": "ð™‚",
  "ð˜©": "ð™", "ð˜": "ð™ƒ", "ð˜ª": "ð™ž", "ð˜": "ð™„", "ð˜«": "ð™Ÿ", "ð˜‘": "ð™…", "ð˜¬": "ð™ ",
  "ð˜’": "ð™†", "ð˜­": "ð™¡", "ð˜“": "ð™‡", "ð˜®": "ð™¢", "ð˜”": "ð™ˆ", "ð˜¯": "ð™£", "ð˜•": "ð™‰",
  "ð˜°": "ð™¤", "ð˜–": "ð™Š", "ð˜±": "ð™¥", "ð˜—": "ð™‹", "ð˜²": "ð™¦", "ð˜˜": "ð™Œ", "ð˜³": "ð™§",
  "ð˜™": "ð™", "ð˜´": "ð™¨", "ð˜š": "ð™Ž", "ð˜µ": "ð™©", "ð˜›": "ð™", "ð˜¶": "ð™ª", "ð˜œ": "ð™",
  "ð˜·": "ð™«", "ð˜": "ð™‘", "ð˜¸": "ð™¬", "ð˜ž": "ð™’", "ð˜¹": "ð™­", "ð˜Ÿ": "ð™“", "ð˜º": "ð™®",
  "ð˜ ": "ð™”", "ð˜»": "ð™¯", "ð˜¡": "ð™•",
}



// == General Symbol Preset == //

const preset_general = registerPreset({
  "name": "General Symbols",
  "replacements": {
    "--": "â€”",
    "->": "â†’",
    "<-": "â†",
  },
  "commands": {
    "\\italic": text => doReplacements(text, italic_letters),
    "\\bold": text => doReplacements(text, bold_letters),
  },
});


// == Sub- and Super-script Preset == //

const preset_sub_super = registerPreset({
  "name": "Sub/Super Scripts",
  "replacements": {},
  "commands": {},
});

for (const key in subscripts)
  preset_sub_super.replacements["_" + key] = subscripts[key];
for (const key in superscripts)
  preset_sub_super.replacements["^" + key] = superscripts[key];


// == LaTeX Preset == //

const math_letter_replacements = {};
for (const letter in math_letters)
  math_letter_replacements["\\" + letter] = math_letters[letter];

const preset_latex = registerPreset({
  "name": "LaTeX/Math",
  "replacements": {
    ...preset_sub_super.replacements,
    ...math_letter_replacements,

    "\\alpha"  : "Î±", "\\Alpha"  : "Î‘",
    "\\beta"   : "Î²", "\\Beta"   : "Î’",
    "\\gamma"  : "Î³", "\\Gamma"  : "Î“",
    "\\delta"  : "Î´", "\\Delta"  : "Î”",
    "\\epsilon": "Ïµ", "\\Epsilon": "Î•",
    "\\zeta"   : "Î¶", "\\Zeta"   : "Î–",
    "\\eta"    : "Î·", "\\Eta"    : "Î—",
    "\\theta"  : "Î¸", "\\Theta"  : "Î˜",
    "\\iota"   : "Î¹", "\\Iota"   : "I",
    "\\kappa"  : "Îº", "\\Kappa"  : "Îš",
    "\\lambda" : "Î»", "\\Lambda" : "Î›",
    "\\mu"     : "Î¼", "\\Mu"     : "Îœ",
    "\\nu"     : "Î½", "\\Nu"     : "Î",
    "\\xi"     : "Î¾", "\\Xi"     : "Îž",
    "\\omicron": "Î¿", "\\Omicron": "ÎŸ",
    "\\pi"     : "Ï€", "\\Pi"     : "Î ",
    "\\rho"    : "Ï", "\\Rho"    : "Î¡",
    "\\sigma"  : "Ïƒ", "\\Sigma"  : "Î£",
    "\\tau"    : "Ï„", "\\Tau"    : "Î¤",
    "\\upsilon": "Ï…", "\\Upsilon": "Î¥",
    "\\phi"    : "Ï•", "\\Phi"    : "Î¦",
    "\\chi"    : "Ï‡", "\\Chi"    : "Î§",
    "\\psi"    : "Ïˆ", "\\Psi"    : "Î¨",
    "\\omega"  : "Ï‰", "\\Omega"  : "Î©",

    "\\varepsilon": "Îµ",
    "\\varkappa": "Ï°",
    "\\varphi": "Ï†",
    "\\varpi": "Ï–",
    "\\varrho": "Ï±",
    "\\varsigma": "Ï‚",
    "\\vartheta": "Ï‘",
    "\\neq": "â‰ ",
    "\\equiv": "â‰¡",
    "\\not\\equiv": "â‰¢",
    "\\leq": "â‰¤",
    "\\geq": "â‰¥",
    "\\leqq": "â‰¦",
    "\\geqq": "â‰§",
    "\\lneqq": "â‰¨",
    "\\gneqq": "â‰©",
    "\\leqslant": "â©½",
    "\\geqslant": "â©¾",
    "\\ll": "â‰ª",
    "\\gg": "â‰«",
    "\\nless": "â‰®",
    "\\ngtr": "â‰¯",
    "\\nleq": "â‰°",
    "\\ngeq": "â‰±",
    "\\lessequivlnt": "â‰²",
    "\\greaterequivlnt": "â‰³",
    "\\prec": "â‰º",
    "\\succ": "â‰»",
    "\\preccurlyeq": "â‰¼",
    "\\succcurlyeq": "â‰½",
    "\\precapprox": "â‰¾",
    "\\succapprox": "â‰¿",
    "\\nprec": "âŠ€",
    "\\nsucc": "âŠ",
    "\\sim": "âˆ¼",
    "\\not\\sim": "â‰",
    "\\simeq": "â‰ƒ",
    "\\not\\simeq": "â‰„",
    "\\backsim": "âˆ½",
    "\\lazysinv": "âˆ¾",
    "\\wr": "â‰€",
    "\\cong": "â‰…",
    "\\not\\cong": "â‰‡",
    "\\approx": "â‰ˆ",
    "\\not\\approx": "â‰‰",
    "\\approxeq": "â‰Š",
    "\\approxnotequal": "â‰†",
    "\\tildetrpl": "â‰‹",
    "\\allequal": "â‰Œ",
    "\\asymp": "â‰",
    "\\doteq": "â‰",
    "\\doteqdot": "â‰‘",
    "\\lneq": "âª‡",
    "\\gneq": "âªˆ",
    "\\preceq": "âª¯",
    "\\succeq": "âª°",
    "\\precneqq": "âªµ",
    "\\succneqq": "âª¶",
    "\\emptyset": "âˆ…",
    "\\in": "âˆˆ",
    "\\notin": "âˆ‰",
    "\\not\\in": "âˆ‰",
    "\\ni": "âˆ‹",
    "\\not\\ni": "âˆŒ",
    "\\subset": "âŠ‚",
    "\\subseteq": "âŠ†",
    "\\not\\subset": "âŠ„",
    "\\not\\subseteq": "âŠˆ",
    "\\supset": "âŠƒ",
    "\\supseteq": "âŠ‡",
    "\\not\\supset": "âŠ…",
    "\\not\\supseteq": "âŠ‰",
    "\\subsetneq": "âŠŠ",
    "\\supsetneq": "âŠ‹",
    "\\exists": "âˆƒ",
    "\\nexists": "âˆ„",
    "\\not\\exists": "âˆ„",
    "\\forall": "âˆ€",
    "\\aleph": "â„µ",
    "\\beth": "â„¶",
    "\\neg": "Â¬",
    "\\wedge": "âˆ§",
    "\\vee": "âˆ¨",
    "\\veebar": "âŠ»",
    "\\land": "âˆ§",
    "\\lor": "âˆ¨",
    "\\top": "âŠ¤",
    "\\bot": "âŠ¥",
    "\\cup": "âˆª",
    "\\cap": "âˆ©",
    "\\bigcup": "â‹ƒ",
    "\\bigcap": "â‹‚",
    "\\setminus": "âˆ–",
    "\\therefore": "âˆ´",
    "\\because": "âˆµ",
    "\\Box": "â–¡",
    "\\models": "âŠ¨",
    "\\vdash": "âŠ¢",
    "\\rightarrow": "â†’",
    "\\Rightarrow": "â‡’",
    "\\implies": "â‡’",
    "\\leftarrow": "â†",
    "\\Leftarrow": "â‡",
    "\\uparrow": "â†‘",
    "\\Uparrow": "â‡‘",
    "\\downarrow": "â†“",
    "\\Downarrow": "â‡“",
    "\\nwarrow": "â†–",
    "\\nearrow": "â†—",
    "\\searrow": "â†˜",
    "\\swarrow": "â†™",
    "\\mapsto": "â†¦",
    "\\to": "â†’",
    "\\leftrightarrow": "â†”",
    "\\hookleftarrow": "â†©",
    "\\Leftrightarrow": "â‡”",
    "\\iff": "â‡”",
    "\\rightarrowtail": "â†£",
    "\\leftarrowtail": "â†¢",
    "\\twoheadrightarrow": "â† ",
    "\\twoheadleftarrow": "â†ž",
    "\\hookrightarrow": "â†ª",
    "\\hookleftarrow": "â†©",
    "\\rightsquigarrow": "â‡",
    "\\rightleftharpoons": "â‡Œ",
    "\\leftrightharpoons": "â‡‹",
    "\\rightharpoonup": "â‡€",
    "\\rightharpoondown": "â‡",
    "\\times": "Ã—",
    "\\div": "Ã·",
    "\\infty": "âˆž",
    "\\nabla": "âˆ‡",
    "\\partial": "âˆ‚",
    "\\sum": "âˆ‘",
    "\\prod": "âˆ",
    "\\coprod": "âˆ",
    "\\int": "âˆ«",
    "\\iint": "âˆ¬",
    "\\iiint": "âˆ­",
    "\\iiiint": "â¨Œ",
    "\\oint": "âˆ®",
    "\\surfintegral": "âˆ¯",
    "\\volintegral": "âˆ°",
    "\\Re": "â„œ",
    "\\Im": "â„‘",
    "\\wp": "â„˜",
    "\\mp": "âˆ“",
    "\\langle": "âŸ¨",
    "\\rangle": "âŸ©",
    "\\lfloor": "âŒŠ",
    "\\rfloor": "âŒ‹",
    "\\lceil": "âŒˆ",
    "\\rceil": "âŒ‰",
    "\\mp": "âˆ“",
    "\\dotplus": "âˆ”",
    "\\bullet": "âˆ™",
    "\\cdot": "â‹…",
    "\\oplus": "âŠ•",
    "\\ominus": "âŠ–",
    "\\otimes": "âŠ—",
    "\\oslash": "âŠ˜",
    "\\odot": "âŠ™",
    "\\circ": "âˆ˜",
    "^\\circ": "Â°",
    "\\surd": "âˆš",
    "\\propto": "âˆ",
    "\\angle": "âˆ ",
    "\\measuredangle": "âˆ¡",
    "\\sphericalangle": "âˆ¢",
    "\\mid": "âˆ£",
    "\\nmid": "âˆ¤",
    "\\not\\mid": "âˆ¤",
    "\\parallel": "âˆ¥",
    "\\nparallel": "âˆ¦",
    "\\not\\parallel": "âˆ¦",
    "\\flat": "â™­",
    "\\natural": "â™®",
    "\\sharp": "â™¯",

    "\\ihat": "Ã®",
    "\\jhat": "Äµ",
    // No khat :(
  },

  "commands": {
    "\\math"    : text => doReplacements(text, math_letters),
    "\\mathbb"  : text => doReplacements(text, blackboard_letters),
    "\\mathfrak": text => doReplacements(text, fraktur_letters),
    "\\mathscr" : text => doReplacements(text, script_letters),
    "\\mathcal" : text => doReplacements(text, calligraphic_letters),
    "\\textit"  : text => doReplacements(text, italic_letters),
    "\\textbf"  : text => doReplacements(text, bold_letters),
    "_"         : text => doReplacements(text, subscripts),
    "^"         : text => doReplacements(text, superscripts),
  },
});
